{"version":3,"sources":["@wordpress/block-library/src/navigation/edit.js"],"names":["Navigation","selectedBlockHasDescendants","attributes","clientId","fontSize","hasExistingNavItems","isImmediateParentOfSelectedBlock","isSelected","setAttributes","setFontSize","updateInnerBlocks","className","ref","selectBlock","name","property","contrastCheckers","backgroundColor","textColor","size","colorDetector","targetRef","colorPanelProps","initialOpen","TextColor","BackgroundColor","ColorPanel","navigatorToolbarButton","navigatorModal","handleItemsAlignment","align","itemsJustification","undefined","blocks","selectNavigationBlock","blockInlineStyles","blockClassNames","class","orientation","navIcons","justifyLeftIcon","icon","title","isActive","onClick","justifyCenterIcon","justifyRightIcon","showSubmenuIcon","value","InnerBlocks","DefaultAppender","select","innerBlocks","getBlocks","getClientIdsOfDescendants","hasSelectedInnerBlock","getSelectedBlockClientId","selectedBlockId","length","dispatch","replaceInnerBlocks"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { upperFirst } from 'lodash';\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { useRef } from '@wordpress/element';\nimport {\n\tInnerBlocks,\n\tInspectorControls,\n\tBlockControls,\n\tFontSizePicker,\n\twithFontSizes,\n\t__experimentalUseColors,\n\t__experimentalBlock as Block,\n} from '@wordpress/block-editor';\nimport { useDispatch, withSelect, withDispatch } from '@wordpress/data';\nimport {\n\tPanelBody,\n\tToggleControl,\n\tToolbar,\n\tToolbarGroup,\n} from '@wordpress/components';\nimport { compose } from '@wordpress/compose';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport useBlockNavigator from './use-block-navigator';\nimport BlockColorsStyleSelector from './block-colors-selector';\nimport * as navIcons from './icons';\nimport NavigationPlaceholder from './placeholder';\n\nfunction Navigation( {\n\tselectedBlockHasDescendants,\n\tattributes,\n\tclientId,\n\tfontSize,\n\thasExistingNavItems,\n\tisImmediateParentOfSelectedBlock,\n\tisSelected,\n\tsetAttributes,\n\tsetFontSize,\n\tupdateInnerBlocks,\n\tclassName,\n} ) {\n\t//\n\t// HOOKS\n\t//\n\tconst ref = useRef();\n\n\tconst { selectBlock } = useDispatch( 'core/block-editor' );\n\tconst { TextColor, BackgroundColor, ColorPanel } = __experimentalUseColors(\n\t\t[\n\t\t\t{ name: 'textColor', property: 'color' },\n\t\t\t{ name: 'backgroundColor', className: 'has-background' },\n\t\t],\n\t\t{\n\t\t\tcontrastCheckers: [\n\t\t\t\t{\n\t\t\t\t\tbackgroundColor: true,\n\t\t\t\t\ttextColor: true,\n\t\t\t\t\tfontSize: fontSize.size,\n\t\t\t\t},\n\t\t\t],\n\t\t\tcolorDetector: { targetRef: ref },\n\t\t\tcolorPanelProps: {\n\t\t\t\tinitialOpen: true,\n\t\t\t},\n\t\t},\n\t\t[ fontSize.size ]\n\t);\n\n\tconst { navigatorToolbarButton, navigatorModal } = useBlockNavigator(\n\t\tclientId\n\t);\n\n\t//\n\t// HANDLERS\n\t//\n\tfunction handleItemsAlignment( align ) {\n\t\treturn () => {\n\t\t\tconst itemsJustification =\n\t\t\t\tattributes.itemsJustification === align ? undefined : align;\n\t\t\tsetAttributes( {\n\t\t\t\titemsJustification,\n\t\t\t} );\n\t\t};\n\t}\n\n\t// If we don't have existing items then show the Placeholder\n\tif ( ! hasExistingNavItems ) {\n\t\treturn (\n\t\t\t<Block.div>\n\t\t\t\t<NavigationPlaceholder\n\t\t\t\t\tref={ ref }\n\t\t\t\t\tonCreate={ ( blocks, selectNavigationBlock ) => {\n\t\t\t\t\t\tupdateInnerBlocks( blocks );\n\t\t\t\t\t\tif ( selectNavigationBlock ) {\n\t\t\t\t\t\t\tselectBlock( clientId );\n\t\t\t\t\t\t}\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t</Block.div>\n\t\t);\n\t}\n\n\tconst blockInlineStyles = {\n\t\tfontSize: fontSize.size ? fontSize.size + 'px' : undefined,\n\t};\n\n\tconst blockClassNames = classnames( className, {\n\t\t[ `items-justified-${ attributes.itemsJustification }` ]: attributes.itemsJustification,\n\t\t[ fontSize.class ]: fontSize.class,\n\t\t'is-vertical': attributes.orientation === 'vertical',\n\t} );\n\n\t// UI State: rendered Block UI\n\treturn (\n\t\t<>\n\t\t\t<BlockControls>\n\t\t\t\t<Toolbar\n\t\t\t\t\ticon={\n\t\t\t\t\t\tattributes.itemsJustification\n\t\t\t\t\t\t\t? navIcons[\n\t\t\t\t\t\t\t\t\t`justify${ upperFirst(\n\t\t\t\t\t\t\t\t\t\tattributes.itemsJustification\n\t\t\t\t\t\t\t\t\t) }Icon`\n\t\t\t\t\t\t\t  ]\n\t\t\t\t\t\t\t: navIcons.justifyLeftIcon\n\t\t\t\t\t}\n\t\t\t\t\tlabel={ __( 'Change items justification' ) }\n\t\t\t\t\tisCollapsed\n\t\t\t\t\tcontrols={ [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ticon: navIcons.justifyLeftIcon,\n\t\t\t\t\t\t\ttitle: __( 'Justify items left' ),\n\t\t\t\t\t\t\tisActive: 'left' === attributes.itemsJustification,\n\t\t\t\t\t\t\tonClick: handleItemsAlignment( 'left' ),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ticon: navIcons.justifyCenterIcon,\n\t\t\t\t\t\t\ttitle: __( 'Justify items center' ),\n\t\t\t\t\t\t\tisActive:\n\t\t\t\t\t\t\t\t'center' === attributes.itemsJustification,\n\t\t\t\t\t\t\tonClick: handleItemsAlignment( 'center' ),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ticon: navIcons.justifyRightIcon,\n\t\t\t\t\t\t\ttitle: __( 'Justify items right' ),\n\t\t\t\t\t\t\tisActive: 'right' === attributes.itemsJustification,\n\t\t\t\t\t\t\tonClick: handleItemsAlignment( 'right' ),\n\t\t\t\t\t\t},\n\t\t\t\t\t] }\n\t\t\t\t/>\n\t\t\t\t<ToolbarGroup>{ navigatorToolbarButton }</ToolbarGroup>\n\t\t\t\t<BlockColorsStyleSelector\n\t\t\t\t\tTextColor={ TextColor }\n\t\t\t\t\tBackgroundColor={ BackgroundColor }\n\t\t\t\t>\n\t\t\t\t\t{ ColorPanel }\n\t\t\t\t</BlockColorsStyleSelector>\n\t\t\t</BlockControls>\n\t\t\t{ navigatorModal }\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody title={ __( 'Text settings' ) }>\n\t\t\t\t\t<FontSizePicker\n\t\t\t\t\t\tvalue={ fontSize.size }\n\t\t\t\t\t\tonChange={ setFontSize }\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody title={ __( 'Display settings' ) }>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tchecked={ attributes.showSubmenuIcon }\n\t\t\t\t\t\tonChange={ ( value ) => {\n\t\t\t\t\t\t\tsetAttributes( { showSubmenuIcon: value } );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tlabel={ __( 'Show submenu indicator icons' ) }\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t\t<TextColor>\n\t\t\t\t<BackgroundColor>\n\t\t\t\t\t<Block.nav\n\t\t\t\t\t\tclassName={ blockClassNames }\n\t\t\t\t\t\tstyle={ blockInlineStyles }\n\t\t\t\t\t>\n\t\t\t\t\t\t<InnerBlocks\n\t\t\t\t\t\t\tref={ ref }\n\t\t\t\t\t\t\tallowedBlocks={ [\n\t\t\t\t\t\t\t\t'core/navigation-link',\n\t\t\t\t\t\t\t\t'core/search',\n\t\t\t\t\t\t\t] }\n\t\t\t\t\t\t\trenderAppender={\n\t\t\t\t\t\t\t\t( isImmediateParentOfSelectedBlock &&\n\t\t\t\t\t\t\t\t\t! selectedBlockHasDescendants ) ||\n\t\t\t\t\t\t\t\tisSelected\n\t\t\t\t\t\t\t\t\t? InnerBlocks.DefaultAppender\n\t\t\t\t\t\t\t\t\t: false\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttemplateInsertUpdatesSelection={ false }\n\t\t\t\t\t\t\torientation={\n\t\t\t\t\t\t\t\tattributes.orientation || 'horizontal'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t__experimentalTagName=\"ul\"\n\t\t\t\t\t\t\t__experimentalAppenderTagName=\"li\"\n\t\t\t\t\t\t\t__experimentalPassedProps={ {\n\t\t\t\t\t\t\t\tclassName: 'wp-block-navigation__container',\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t__experimentalCaptureToolbars={ true }\n\t\t\t\t\t\t\t// Template lock set to false here so that the Nav\n\t\t\t\t\t\t\t// Block on the experimental menus screen does not\n\t\t\t\t\t\t\t// inherit templateLock={ 'all' }.\n\t\t\t\t\t\t\ttemplateLock={ false }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Block.nav>\n\t\t\t\t</BackgroundColor>\n\t\t\t</TextColor>\n\t\t</>\n\t);\n}\n\nexport default compose( [\n\twithFontSizes( 'fontSize' ),\n\twithSelect( ( select, { clientId } ) => {\n\t\tconst innerBlocks = select( 'core/block-editor' ).getBlocks( clientId );\n\t\tconst {\n\t\t\tgetClientIdsOfDescendants,\n\t\t\thasSelectedInnerBlock,\n\t\t\tgetSelectedBlockClientId,\n\t\t} = select( 'core/block-editor' );\n\t\tconst isImmediateParentOfSelectedBlock = hasSelectedInnerBlock(\n\t\t\tclientId,\n\t\t\tfalse\n\t\t);\n\t\tconst selectedBlockId = getSelectedBlockClientId();\n\t\tconst selectedBlockHasDescendants = !! getClientIdsOfDescendants( [\n\t\t\tselectedBlockId,\n\t\t] )?.length;\n\t\treturn {\n\t\t\tisImmediateParentOfSelectedBlock,\n\t\t\tselectedBlockHasDescendants,\n\t\t\thasExistingNavItems: !! innerBlocks.length,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch, { clientId } ) => {\n\t\treturn {\n\t\t\tupdateInnerBlocks( blocks ) {\n\t\t\t\tif ( blocks?.length === 0 ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tdispatch( 'core/block-editor' ).replaceInnerBlocks(\n\t\t\t\t\tclientId,\n\t\t\t\t\tblocks\n\t\t\t\t);\n\t\t\t},\n\t\t};\n\t} ),\n] )( Navigation );\n"]}