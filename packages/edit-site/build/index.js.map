{"version":3,"sources":["@wordpress/edit-site/src/index.js"],"names":["fetchLinkSuggestions","search","perPage","path","per_page","type","subtype","then","posts","Promise","all","map","post","url","_links","self","href","link","id","slug","title","rendered","initialize","settings","__experimentalFetchLinkSuggestions","initialState","editSiteInitialState","process","env","GUTENBERG_PHASE","document","getElementById"],"mappings":";;;;;;;;;;;;;;;AAWA;;AARA;;AACA;;AACA;;AACA;;AACA;;AASA;;AACA;;AACA;;AACA;;AAkDA;;AArEA;;;;AAaA;;;AAQA,IAAMA,oBAAoB,GAAG,SAAvBA,oBAAuB,CAAEC,MAAF;AAAA,iFAA6B,EAA7B;AAAA,0BAAYC,OAAZ;AAAA,MAAYA,OAAZ,6BAAsB,EAAtB;;AAAA,SAC5B,uBAAU;AACTC,IAAAA,IAAI,EAAE,uBAAc,eAAd,EAA+B;AACpCC,MAAAA,QAAQ,EAAEF,OAD0B;AAEpCD,MAAAA,MAAM,EAANA,MAFoC;AAGpCI,MAAAA,IAAI,EAAE,MAH8B;AAIpCC,MAAAA,OAAO,EAAE;AAJ2B,KAA/B;AADG,GAAV,EAQEC,IARF,CAQQ,UAAEC,KAAF;AAAA,WACNC,OAAO,CAACC,GAAR,CACCF,KAAK,CAACG,GAAN,CAAW,UAAEC,IAAF;AAAA,aACV,uBAAU;AAAEC,QAAAA,GAAG,EAAED,IAAI,CAACE,MAAL,CAAYC,IAAZ,CAAkB,CAAlB,EAAsBC;AAA7B,OAAV,CADU;AAAA,KAAX,CADD,CADM;AAAA,GARR,EAeET,IAfF,CAeQ,UAAEC,KAAF;AAAA,WACNA,KAAK,CAACG,GAAN,CAAW,UAAEC,IAAF;AAAA,aAAc;AACxBC,QAAAA,GAAG,EAAED,IAAI,CAACK,IADc;AAExBZ,QAAAA,IAAI,EAAEO,IAAI,CAACP,IAFa;AAGxBa,QAAAA,EAAE,EAAEN,IAAI,CAACM,EAHe;AAIxBC,QAAAA,IAAI,EAAEP,IAAI,CAACO,IAJa;AAKxBC,QAAAA,KAAK,EAAER,IAAI,CAACQ,KAAL,CAAWC,QAAX,IAAuB,cAAI,YAAJ;AALN,OAAd;AAAA,KAAX,CADM;AAAA,GAfR,CAD4B;AAAA,CAA7B;AA0BA;;;;;;;;AAMO,SAASC,UAAT,CAAqBJ,EAArB,EAAyBK,QAAzB,EAAoC;AAC1CA,EAAAA,QAAQ,CAACC,kCAAT,GAA8CxB,oBAA9C;AAEA,MAAMyB,YAAY,GAAGF,QAAQ,CAACG,oBAA9B;AACA,SAAOH,QAAQ,CAACG,oBAAhB;AACAD,EAAAA,YAAY,CAACF,QAAb,GAAwBA,QAAxB;AACA,sBAAuBE,YAAvB;AAEA;;AACA,MAAKE,OAAO,CAACC,GAAR,CAAYC,eAAZ,KAAgC,CAArC,EAAyC;AACxC,oEAA8CN,QAA9C;AACA;;AAED,uBAAQ,4BAAC,eAAD,OAAR,EAAoBO,QAAQ,CAACC,cAAT,CAAyBb,EAAzB,CAApB;AACA","sourcesContent":["/**\n * WordPress dependencies\n */\nimport apiFetch from '@wordpress/api-fetch';\nimport { addQueryArgs } from '@wordpress/url';\nimport { __ } from '@wordpress/i18n';\nimport '@wordpress/notices';\nimport {\n\tregisterCoreBlocks,\n\t__experimentalRegisterExperimentalCoreBlocks,\n} from '@wordpress/block-library';\nimport { render } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport './plugins';\nimport './hooks';\nimport registerEditSiteStore from './store';\nimport Editor from './components/editor';\n\nconst fetchLinkSuggestions = ( search, { perPage = 20 } = {} ) =>\n\tapiFetch( {\n\t\tpath: addQueryArgs( '/wp/v2/search', {\n\t\t\tper_page: perPage,\n\t\t\tsearch,\n\t\t\ttype: 'post',\n\t\t\tsubtype: 'post',\n\t\t} ),\n\t} )\n\t\t.then( ( posts ) =>\n\t\t\tPromise.all(\n\t\t\t\tposts.map( ( post ) =>\n\t\t\t\t\tapiFetch( { url: post._links.self[ 0 ].href } )\n\t\t\t\t)\n\t\t\t)\n\t\t)\n\t\t.then( ( posts ) =>\n\t\t\tposts.map( ( post ) => ( {\n\t\t\t\turl: post.link,\n\t\t\t\ttype: post.type,\n\t\t\t\tid: post.id,\n\t\t\t\tslug: post.slug,\n\t\t\t\ttitle: post.title.rendered || __( '(no title)' ),\n\t\t\t} ) )\n\t\t);\n\n/**\n * Initializes the site editor screen.\n *\n * @param {string} id       ID of the root element to render the screen in.\n * @param {Object} settings Editor settings.\n */\nexport function initialize( id, settings ) {\n\tsettings.__experimentalFetchLinkSuggestions = fetchLinkSuggestions;\n\n\tconst initialState = settings.editSiteInitialState;\n\tdelete settings.editSiteInitialState;\n\tinitialState.settings = settings;\n\tregisterEditSiteStore( initialState );\n\n\tregisterCoreBlocks();\n\tif ( process.env.GUTENBERG_PHASE === 2 ) {\n\t\t__experimentalRegisterExperimentalCoreBlocks( settings );\n\t}\n\n\trender( <Editor />, document.getElementById( id ) );\n}\n\nexport { default as __experimentalFullscreenModeClose } from './components/header/fullscreen-mode-close';\n"]}