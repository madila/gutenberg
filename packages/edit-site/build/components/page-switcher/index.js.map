{"version":3,"sources":["@wordpress/edit-site/src/components/page-switcher/index.js"],"names":["PageSwitcher","showOnFront","activePage","onActivePageChange","select","getEntityRecords","pageGroups","pages","map","_page","path","link","label","title","rendered","home","type","slug","value","context","postType","postId","id","categories","category","name","query","categoryIds","queryContext","page","posts","unshift","onPageSelect","newPath","find","choice","rest","onPostSelect","post","url","children","className"],"mappings":"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","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { getPathAndQueryString } from '@wordpress/url';\nimport { useSelect } from '@wordpress/data';\nimport {\n\tTooltip,\n\tDropdownMenu,\n\tMenuGroup,\n\tMenuItemsChoice,\n} from '@wordpress/components';\nimport { Icon, home } from '@wordpress/icons';\nimport { __ } from '@wordpress/i18n';\nimport { __experimentalLinkControl as LinkControl } from '@wordpress/block-editor';\n\nexport default function PageSwitcher( {\n\tshowOnFront,\n\tactivePage,\n\tonActivePageChange,\n} ) {\n\tconst { pages = [], categories = [], posts = [] } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getEntityRecords } = select( 'core' );\n\t\t\tconst pageGroups = {\n\t\t\t\tpages: getEntityRecords( 'postType', 'page' )?.map(\n\t\t\t\t\t( _page ) => {\n\t\t\t\t\t\tconst path = getPathAndQueryString( _page.link );\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tlabel:\n\t\t\t\t\t\t\t\tpath === '/' ? (\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t{ _page.title.rendered }\n\t\t\t\t\t\t\t\t\t\t<Tooltip text={ __( 'Home' ) }>\n\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t<Icon icon={ home } />\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t_page.title.rendered\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\ttype: 'page',\n\t\t\t\t\t\t\tslug: _page.slug,\n\t\t\t\t\t\t\tvalue: path,\n\t\t\t\t\t\t\tcontext: {\n\t\t\t\t\t\t\t\tpostType: 'page',\n\t\t\t\t\t\t\t\tpostId: _page.id,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t),\n\t\t\t\tcategories: getEntityRecords( 'taxonomy', 'category' )?.map(\n\t\t\t\t\t( category ) => {\n\t\t\t\t\t\tconst path = getPathAndQueryString( category.link );\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tlabel: category.name,\n\t\t\t\t\t\t\ttype: 'category',\n\t\t\t\t\t\t\tslug: category.slug,\n\t\t\t\t\t\t\tvalue: path,\n\t\t\t\t\t\t\tcontext: {\n\t\t\t\t\t\t\t\tquery: { categoryIds: [ category.id ] },\n\t\t\t\t\t\t\t\tqueryContext: { page: 1 },\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t),\n\t\t\t\tposts: [],\n\t\t\t};\n\t\t\tif ( showOnFront === 'posts' )\n\t\t\t\tpageGroups.posts.unshift( {\n\t\t\t\t\tlabel: (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{ __( 'All Posts' ) }\n\t\t\t\t\t\t\t<Tooltip text={ __( 'Home' ) }>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<Icon icon={ home } />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t</>\n\t\t\t\t\t),\n\t\t\t\t\tvalue: '/',\n\t\t\t\t\tcontext: {\n\t\t\t\t\t\tquery: { categoryIds: [] },\n\t\t\t\t\t\tqueryContext: { page: 1 },\n\t\t\t\t\t},\n\t\t\t\t} );\n\t\t\treturn pageGroups;\n\t\t},\n\t\t[ showOnFront ]\n\t);\n\n\tconst onPageSelect = ( newPath ) => {\n\t\tconst { value: path, ...rest } = [\n\t\t\t...pages,\n\t\t\t...categories,\n\t\t\t...posts,\n\t\t].find( ( choice ) => choice.value === newPath );\n\t\tonActivePageChange( { ...rest, path } );\n\t};\n\tconst onPostSelect = ( post ) =>\n\t\tonActivePageChange( {\n\t\t\ttype: 'post',\n\t\t\tslug: post.slug,\n\t\t\tpath: getPathAndQueryString( post.url ),\n\t\t\tcontext: { postType: post.type, postId: post.id },\n\t\t} );\n\treturn (\n\t\t<DropdownMenu\n\t\t\ticon={ null }\n\t\t\tlabel={ __( 'Switch Page' ) }\n\t\t\ttoggleProps={ {\n\t\t\t\tchildren:\n\t\t\t\t\t[ ...pages, ...categories, ...posts ].find(\n\t\t\t\t\t\t( choice ) => choice.value === activePage.path\n\t\t\t\t\t)?.label || activePage.path,\n\t\t\t} }\n\t\t\tmenuProps={ { className: 'edit-site-page-switcher__menu' } }\n\t\t>\n\t\t\t{ () => (\n\t\t\t\t<>\n\t\t\t\t\t<MenuGroup label={ __( 'Pages' ) }>\n\t\t\t\t\t\t<MenuItemsChoice\n\t\t\t\t\t\t\tchoices={ pages }\n\t\t\t\t\t\t\tvalue={ activePage.path }\n\t\t\t\t\t\t\tonSelect={ onPageSelect }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</MenuGroup>\n\t\t\t\t\t<MenuGroup label={ __( 'Categories' ) }>\n\t\t\t\t\t\t<MenuItemsChoice\n\t\t\t\t\t\t\tchoices={ categories }\n\t\t\t\t\t\t\tvalue={ activePage.path }\n\t\t\t\t\t\t\tonSelect={ onPageSelect }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</MenuGroup>\n\t\t\t\t\t<MenuGroup label={ __( 'Posts' ) }>\n\t\t\t\t\t\t<MenuItemsChoice\n\t\t\t\t\t\t\tchoices={ posts }\n\t\t\t\t\t\t\tvalue={ activePage.path }\n\t\t\t\t\t\t\tonSelect={ onPageSelect }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<LinkControl\n\t\t\t\t\t\t\tsearchInputPlaceholder={ __( 'Search for Post' ) }\n\t\t\t\t\t\t\tonChange={ onPostSelect }\n\t\t\t\t\t\t\tsettings={ {} }\n\t\t\t\t\t\t\tnoDirectEntry\n\t\t\t\t\t\t\tshowInitialSuggestions\n\t\t\t\t\t\t/>\n\t\t\t\t\t</MenuGroup>\n\t\t\t\t</>\n\t\t\t) }\n\t\t</DropdownMenu>\n\t);\n}\n"]}