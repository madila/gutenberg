{"version":3,"sources":["@wordpress/e2e-test-utils/src/posts.js"],"names":["trashAllPosts","postType","query","post_type","slice","page","$","bulkSelector","waitForSelector","click","select","waitForXPath"],"mappings":";;;;;;;;;;;;;AAGA;;AAKA;;AACA;;AACA;;AAVA;;;;AAKA;;;;AAOA;;;;;;;SAOsBA,a;;;;;2FAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8BC,YAAAA,QAA9B,2DAAyC,MAAzC;AAAA;AAAA,mBACA,2CADA;;AAAA;AAEN;AACMC,YAAAA,KAHA,GAGQ,uBAAc,EAAd,EAAkB;AAC/BC,cAAAA,SAAS,EAAEF;AADoB,aAAlB,EAEVG,KAFU,CAEH,CAFG,CAHR;AAAA;AAAA,mBAMA,oCAAgB,UAAhB,EAA4BF,KAA5B,CANA;;AAAA;AAAA;AAAA,mBASqBG,IAAI,CAACC,CAAL,CAAQ,2BAAR,CATrB;;AAAA;AASAC,YAAAA,YATA;;AAAA,gBAUCA,YAVD;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAAA,mBAeAF,IAAI,CAACG,eAAL,CAAsB,sBAAtB,CAfA;;AAAA;AAAA;AAAA,mBAgBAH,IAAI,CAACI,KAAL,CAAY,sBAAZ,CAhBA;;AAAA;AAAA;AAAA,mBAkBAJ,IAAI,CAACK,MAAL,CAAa,2BAAb,EAA0C,OAA1C,CAlBA;;AAAA;AAAA;AAAA,mBAoBAL,IAAI,CAACI,KAAL,CAAY,WAAZ,CApBA;;AAAA;AAAA;AAAA,mBAqBAJ,IAAI,CAACM,YAAL,CACL,oFADK,CArBA;;AAAA;AAAA;AAAA,mBAwBA,yCAxBA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { addQueryArgs } from '@wordpress/url';\n\n/**\n * Internal dependencies\n */\nimport { switchUserToAdmin } from './switch-user-to-admin';\nimport { switchUserToTest } from './switch-user-to-test';\nimport { visitAdminPage } from './visit-admin-page';\n\n/**\n * Navigates to the post listing screen and bulk-trashes any posts which exist.\n *\n * @param {string} postType - String slug for type of post to trash.\n *\n * @return {Promise} Promise resolving once posts have been trashed.\n */\nexport async function trashAllPosts( postType = 'post' ) {\n\tawait switchUserToAdmin();\n\t// Visit `/wp-admin/edit.php` so we can see a list of posts and delete them.\n\tconst query = addQueryArgs( '', {\n\t\tpost_type: postType,\n\t} ).slice( 1 );\n\tawait visitAdminPage( 'edit.php', query );\n\n\t// If this selector doesn't exist there are no posts for us to delete.\n\tconst bulkSelector = await page.$( '#bulk-action-selector-top' );\n\tif ( ! bulkSelector ) {\n\t\treturn;\n\t}\n\n\t// Select all posts.\n\tawait page.waitForSelector( '[id^=cb-select-all-]' );\n\tawait page.click( '[id^=cb-select-all-]' );\n\t// Select the \"bulk actions\" > \"trash\" option.\n\tawait page.select( '#bulk-action-selector-top', 'trash' );\n\t// Submit the form to send all draft/scheduled/published posts to the trash.\n\tawait page.click( '#doaction' );\n\tawait page.waitForXPath(\n\t\t'//*[contains(@class, \"updated notice\")]/p[contains(text(), \"moved to the Trash.\")]'\n\t);\n\tawait switchUserToTest();\n}\n"]}