{"version":3,"sources":["@wordpress/block-editor/src/components/block-mover/index.js"],"names":["BlockMover","arguments","state","isFocused","onFocus","bind","onBlur","setState","props","isFirst","isLast","clientIds","isLocked","isHidden","rootClientId","orientation","itemProps","Component","select","getBlock","getBlockIndex","getBlockListSettings","getTemplateLock","getBlockOrder","getBlockRootClientId","normalizedClientIds","firstClientId","block","firstIndex","lastIndex","blockOrder","length","blockType","name"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { first, last, castArray } from 'lodash';\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tToolbarGroup,\n\t__experimentalToolbarItem as ToolbarItem,\n} from '@wordpress/components';\nimport { getBlockType } from '@wordpress/blocks';\nimport { Component } from '@wordpress/element';\nimport { withSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { BlockMoverUpButton, BlockMoverDownButton } from './button';\n\nexport class BlockMover extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\t\tthis.state = {\n\t\t\tisFocused: false,\n\t\t};\n\t\tthis.onFocus = this.onFocus.bind( this );\n\t\tthis.onBlur = this.onBlur.bind( this );\n\t}\n\n\tonFocus() {\n\t\tthis.setState( {\n\t\t\tisFocused: true,\n\t\t} );\n\t}\n\n\tonBlur() {\n\t\tthis.setState( {\n\t\t\tisFocused: false,\n\t\t} );\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\tisFirst,\n\t\t\tisLast,\n\t\t\tclientIds,\n\t\t\tisLocked,\n\t\t\tisHidden,\n\t\t\trootClientId,\n\t\t\torientation,\n\t\t} = this.props;\n\t\tconst { isFocused } = this.state;\n\t\tif ( isLocked || ( isFirst && isLast && ! rootClientId ) ) {\n\t\t\treturn null;\n\t\t}\n\n\t\t// We emulate a disabled state because forcefully applying the `disabled`\n\t\t// attribute on the buttons while it has focus causes the screen to change\n\t\t// to an unfocused state (body as active element) without firing blur on,\n\t\t// the rendering parent, leaving it unable to react to focus out.\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName={ classnames( 'block-editor-block-mover', {\n\t\t\t\t\t'is-visible': isFocused || ! isHidden,\n\t\t\t\t\t'is-horizontal': orientation === 'horizontal',\n\t\t\t\t} ) }\n\t\t\t>\n\t\t\t\t<ToolbarGroup>\n\t\t\t\t\t<ToolbarItem\n\t\t\t\t\t\tonFocus={ this.onFocus }\n\t\t\t\t\t\tonBlur={ this.onBlur }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ ( itemProps ) => (\n\t\t\t\t\t\t\t<BlockMoverUpButton\n\t\t\t\t\t\t\t\tclientIds={ clientIds }\n\t\t\t\t\t\t\t\t{ ...itemProps }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</ToolbarItem>\n\t\t\t\t\t<ToolbarItem\n\t\t\t\t\t\tonFocus={ this.onFocus }\n\t\t\t\t\t\tonBlur={ this.onBlur }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ ( itemProps ) => (\n\t\t\t\t\t\t\t<BlockMoverDownButton\n\t\t\t\t\t\t\t\tclientIds={ clientIds }\n\t\t\t\t\t\t\t\t{ ...itemProps }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</ToolbarItem>\n\t\t\t\t</ToolbarGroup>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default withSelect( ( select, { clientIds } ) => {\n\tconst {\n\t\tgetBlock,\n\t\tgetBlockIndex,\n\t\tgetBlockListSettings,\n\t\tgetTemplateLock,\n\t\tgetBlockOrder,\n\t\tgetBlockRootClientId,\n\t} = select( 'core/block-editor' );\n\tconst normalizedClientIds = castArray( clientIds );\n\tconst firstClientId = first( normalizedClientIds );\n\tconst block = getBlock( firstClientId );\n\tconst rootClientId = getBlockRootClientId( first( normalizedClientIds ) );\n\tconst firstIndex = getBlockIndex( firstClientId, rootClientId );\n\tconst lastIndex = getBlockIndex(\n\t\tlast( normalizedClientIds ),\n\t\trootClientId\n\t);\n\tconst blockOrder = getBlockOrder( rootClientId );\n\tconst isFirst = firstIndex === 0;\n\tconst isLast = lastIndex === blockOrder.length - 1;\n\n\treturn {\n\t\tblockType: block ? getBlockType( block.name ) : null,\n\t\tisLocked: getTemplateLock( rootClientId ) === 'all',\n\t\trootClientId,\n\t\tfirstIndex,\n\t\tisFirst,\n\t\tisLast,\n\t\torientation: getBlockListSettings( rootClientId )?.orientation,\n\t};\n} )( BlockMover );\n"]}