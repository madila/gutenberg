{"version":3,"sources":["@wordpress/interface/src/components/complementary-area/index.js"],"names":["ComplementaryAreaSlot","scope","props","ComplementaryAreaFill","children","className","origin","useAdjustComplementaryListener","identifier","activeArea","isActive","isSmall","previousIsSmall","shouldOpenWhenNotSmall","enableComplementaryArea","disableComplementaryArea","current","ComplementaryArea","closeLabel","header","headerClassName","icon","isPinnable","panelClassName","smallScreenTitle","title","toggleShortcut","isActiveByDefault","select","getActiveComplementaryArea","isItemPinned","_activeArea","isPinned","isViewportMatch","pinItem","unpinItem","undefined","label","shortcut","starFilled","starEmpty","ComplementaryAreaWrapped","Slot"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { Animate, Button, Panel, Slot, Fill } from '@wordpress/components';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { __ } from '@wordpress/i18n';\nimport { starEmpty, starFilled } from '@wordpress/icons';\nimport { useEffect, useRef } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport ComplementaryAreaHeader from '../complementary-area-header';\nimport ComplementaryAreaToggle from '../complementary-area-toggle';\nimport withComplementaryAreaContext from '../complementary-area-context';\nimport PinnedItems from '../pinned-items';\n\nfunction ComplementaryAreaSlot( { scope, ...props } ) {\n\treturn <Slot name={ `ComplementaryArea/${ scope }` } { ...props } />;\n}\n\nfunction ComplementaryAreaFill( { scope, children, className } ) {\n\treturn (\n\t\t<Fill name={ `ComplementaryArea/${ scope }` }>\n\t\t\t<Animate type=\"slide-in\" options={ { origin: 'left' } }>\n\t\t\t\t{ () => <div className={ className }>{ children }</div> }\n\t\t\t</Animate>\n\t\t</Fill>\n\t);\n}\n\nfunction useAdjustComplementaryListener(\n\tscope,\n\tidentifier,\n\tactiveArea,\n\tisActive,\n\tisSmall\n) {\n\tconst previousIsSmall = useRef( false );\n\tconst shouldOpenWhenNotSmall = useRef( false );\n\tconst { enableComplementaryArea, disableComplementaryArea } = useDispatch(\n\t\t'core/interface'\n\t);\n\tuseEffect( () => {\n\t\t// If the complementary area is active and the editor is switching from a big to a small window size.\n\t\tif ( isActive && isSmall && ! previousIsSmall.current ) {\n\t\t\t// Disable the complementary area.\n\t\t\tdisableComplementaryArea( scope );\n\t\t\t// Flag the complementary area to be reopened when the window size goes from small to big.\n\t\t\tshouldOpenWhenNotSmall.current = true;\n\t\t} else if (\n\t\t\t// If there is a flag indicating the complementary area should be enabled when we go from small to big window size\n\t\t\t// and we are going from a small to big window size.\n\t\t\tshouldOpenWhenNotSmall.current &&\n\t\t\t! isSmall &&\n\t\t\tpreviousIsSmall.current\n\t\t) {\n\t\t\t// Remove the flag indicating the complementary area should be enabled.\n\t\t\tshouldOpenWhenNotSmall.current = false;\n\t\t\t// Enable the complementary area.\n\t\t\tenableComplementaryArea( scope, identifier );\n\t\t} else if (\n\t\t\t// If the flag is indicating the current complementary should be reopened but another complementary area becomes active,\n\t\t\t// remove the flag.\n\t\t\tshouldOpenWhenNotSmall.current &&\n\t\t\tactiveArea &&\n\t\t\tactiveArea !== identifier\n\t\t) {\n\t\t\tshouldOpenWhenNotSmall.current = false;\n\t\t}\n\t\tif ( isSmall !== previousIsSmall.current ) {\n\t\t\tpreviousIsSmall.current = isSmall;\n\t\t}\n\t}, [ isActive, isSmall, scope, identifier, activeArea ] );\n}\n\nfunction ComplementaryArea( {\n\tchildren,\n\tclassName,\n\tcloseLabel = __( 'Close plugin' ),\n\tidentifier,\n\theader,\n\theaderClassName,\n\ticon,\n\tisPinnable = true,\n\tpanelClassName,\n\tscope,\n\tsmallScreenTitle,\n\ttitle,\n\ttoggleShortcut,\n\tisActiveByDefault,\n} ) {\n\tconst { isActive, isPinned, activeArea, isSmall } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getActiveComplementaryArea, isItemPinned } = select(\n\t\t\t\t'core/interface'\n\t\t\t);\n\t\t\tconst _activeArea = getActiveComplementaryArea( scope );\n\t\t\treturn {\n\t\t\t\tisActive: _activeArea === identifier,\n\t\t\t\tisPinned: isItemPinned( scope, identifier ),\n\t\t\t\tactiveArea: _activeArea,\n\t\t\t\tisSmall: select( 'core/viewport' ).isViewportMatch(\n\t\t\t\t\t'< medium'\n\t\t\t\t),\n\t\t\t};\n\t\t},\n\t\t[ identifier, scope ]\n\t);\n\tuseAdjustComplementaryListener(\n\t\tscope,\n\t\tidentifier,\n\t\tactiveArea,\n\t\tisActive,\n\t\tisSmall\n\t);\n\tconst {\n\t\tenableComplementaryArea,\n\t\tdisableComplementaryArea,\n\t\tpinItem,\n\t\tunpinItem,\n\t} = useDispatch( 'core/interface' );\n\n\tuseEffect( () => {\n\t\tif ( isActiveByDefault && activeArea === undefined && ! isSmall ) {\n\t\t\tenableComplementaryArea( scope, identifier );\n\t\t}\n\t}, [ activeArea, isActiveByDefault, scope, identifier, isSmall ] );\n\n\treturn (\n\t\t<>\n\t\t\t{ isPinned && isPinnable && (\n\t\t\t\t<PinnedItems scope={ scope }>\n\t\t\t\t\t<ComplementaryAreaToggle\n\t\t\t\t\t\tscope={ scope }\n\t\t\t\t\t\tidentifier={ identifier }\n\t\t\t\t\t\tisPressed={ isActive }\n\t\t\t\t\t\taria-expanded={ isActive }\n\t\t\t\t\t\tlabel={ title }\n\t\t\t\t\t\ticon={ icon }\n\t\t\t\t\t/>\n\t\t\t\t</PinnedItems>\n\t\t\t) }\n\t\t\t{ isActive && (\n\t\t\t\t<ComplementaryAreaFill\n\t\t\t\t\tclassName={ classnames(\n\t\t\t\t\t\t'interface-complementary-area',\n\t\t\t\t\t\tclassName\n\t\t\t\t\t) }\n\t\t\t\t\tscope={ scope }\n\t\t\t\t>\n\t\t\t\t\t<ComplementaryAreaHeader\n\t\t\t\t\t\tclassName={ headerClassName }\n\t\t\t\t\t\tcloseLabel={ closeLabel }\n\t\t\t\t\t\tonClose={ () => disableComplementaryArea( scope ) }\n\t\t\t\t\t\tsmallScreenTitle={ smallScreenTitle }\n\t\t\t\t\t\ttoggleButtonProps={ {\n\t\t\t\t\t\t\tlabel: closeLabel,\n\t\t\t\t\t\t\tshortcut: toggleShortcut,\n\t\t\t\t\t\t\tscope,\n\t\t\t\t\t\t\tidentifier,\n\t\t\t\t\t\t} }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ header || (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<strong>{ title }</strong>\n\t\t\t\t\t\t\t\t{ isPinnable && (\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tclassName=\"interface-complementary-area__pin-unpin-item\"\n\t\t\t\t\t\t\t\t\t\ticon={\n\t\t\t\t\t\t\t\t\t\t\tisPinned ? starFilled : starEmpty\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tlabel={\n\t\t\t\t\t\t\t\t\t\t\tisPinned\n\t\t\t\t\t\t\t\t\t\t\t\t? __( 'Unpin from toolbar' )\n\t\t\t\t\t\t\t\t\t\t\t\t: __( 'Pin to toolbar' )\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tonClick={ () =>\n\t\t\t\t\t\t\t\t\t\t\t( isPinned ? unpinItem : pinItem )(\n\t\t\t\t\t\t\t\t\t\t\t\tscope,\n\t\t\t\t\t\t\t\t\t\t\t\tidentifier\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tisPressed={ isPinned }\n\t\t\t\t\t\t\t\t\t\taria-expanded={ isPinned }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</ComplementaryAreaHeader>\n\t\t\t\t\t<Panel className={ panelClassName }>{ children }</Panel>\n\t\t\t\t</ComplementaryAreaFill>\n\t\t\t) }\n\t\t</>\n\t);\n}\n\nconst ComplementaryAreaWrapped = withComplementaryAreaContext(\n\tComplementaryArea\n);\n\nComplementaryAreaWrapped.Slot = ComplementaryAreaSlot;\n\nexport default ComplementaryAreaWrapped;\n"]}