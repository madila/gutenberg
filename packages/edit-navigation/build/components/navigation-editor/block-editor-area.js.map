{"version":3,"sources":["@wordpress/edit-navigation/src/components/navigation-editor/block-editor-area.js"],"names":["BlockEditorArea","onDeleteMenu","menuId","saveBlocks","select","isNavigationMode","getBlockSelectionStart","getBlock","getBlocks","selectionStartClientId","rootClientId","clientId","rootBlockId","isNavigationModeActive","isRootBlockSelected","hasSelectedBlock","saveMenu","menu","getMenu","autoAddPages","setAutoAddPages","auto_add","selectBlock"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tBlockList,\n\tBlockToolbar,\n\tNavigableToolbar,\n\tObserveTyping,\n\tWritingFlow,\n} from '@wordpress/block-editor';\nimport { useEffect, useState } from '@wordpress/element';\nimport {\n\tButton,\n\tCard,\n\tCardHeader,\n\tCardBody,\n\tCardFooter,\n\tCheckboxControl,\n\tPopover,\n} from '@wordpress/components';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport DeleteMenuButton from '../delete-menu-button';\n\nexport default function BlockEditorArea( {\n\tonDeleteMenu,\n\tmenuId,\n\tsaveBlocks,\n} ) {\n\tconst {\n\t\trootBlockId,\n\t\tisNavigationModeActive,\n\t\tisRootBlockSelected,\n\t\thasSelectedBlock,\n\t} = useSelect( ( select ) => {\n\t\tconst {\n\t\t\tisNavigationMode,\n\t\t\tgetBlockSelectionStart,\n\t\t\tgetBlock,\n\t\t\tgetBlocks,\n\t\t} = select( 'core/block-editor' );\n\n\t\tconst selectionStartClientId = getBlockSelectionStart();\n\t\tconst rootClientId = getBlocks()[ 0 ]?.clientId;\n\n\t\treturn {\n\t\t\tselectionStartClientId,\n\t\t\trootBlockId: rootClientId,\n\t\t\tisNavigationModeActive: isNavigationMode(),\n\t\t\tisRootBlockSelected:\n\t\t\t\t!! selectionStartClientId &&\n\t\t\t\trootClientId === selectionStartClientId,\n\t\t\thasSelectedBlock:\n\t\t\t\t!! selectionStartClientId &&\n\t\t\t\t!! getBlock( selectionStartClientId ),\n\t\t};\n\t}, [] );\n\n\tconst { saveMenu } = useDispatch( 'core' );\n\tconst menu = useSelect( ( select ) => select( 'core' ).getMenu( menuId ), [\n\t\tmenuId,\n\t] );\n\n\tconst [ autoAddPages, setAutoAddPages ] = useState( false );\n\n\tuseEffect( () => {\n\t\tif ( menu ) {\n\t\t\tsetAutoAddPages( menu.auto_add );\n\t\t}\n\t}, [ menuId ] );\n\n\t// Select the navigation block when it becomes available\n\tconst { selectBlock } = useDispatch( 'core/block-editor' );\n\tuseEffect( () => {\n\t\tif ( rootBlockId ) {\n\t\t\tselectBlock( rootBlockId );\n\t\t}\n\t}, [ rootBlockId ] );\n\n\treturn (\n\t\t<Card className=\"edit-navigation-editor__block-editor-area\">\n\t\t\t<CardHeader>\n\t\t\t\t<div className=\"edit-navigation-editor__block-editor-area-header-text\">\n\t\t\t\t\t{ __( 'Navigation menu' ) }\n\t\t\t\t</div>\n\n\t\t\t\t<Button isPrimary onClick={ saveBlocks }>\n\t\t\t\t\t{ __( 'Save navigation' ) }\n\t\t\t\t</Button>\n\t\t\t</CardHeader>\n\t\t\t<CardBody>\n\t\t\t\t<NavigableToolbar\n\t\t\t\t\tclassName={ classnames(\n\t\t\t\t\t\t'edit-navigation-editor__block-editor-toolbar',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'is-hidden':\n\t\t\t\t\t\t\t\tisNavigationModeActive || isRootBlockSelected,\n\t\t\t\t\t\t}\n\t\t\t\t\t) }\n\t\t\t\t\taria-label={ __( 'Block tools' ) }\n\t\t\t\t>\n\t\t\t\t\t{ hasSelectedBlock && ! isRootBlockSelected && (\n\t\t\t\t\t\t<BlockToolbar\n\t\t\t\t\t\t\thideDragHandle\n\t\t\t\t\t\t\t__experimentalExpandedControl\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</NavigableToolbar>\n\t\t\t\t<Popover.Slot name=\"block-toolbar\" />\n\t\t\t\t<div className=\"editor-styles-wrapper\">\n\t\t\t\t\t<WritingFlow>\n\t\t\t\t\t\t<ObserveTyping>\n\t\t\t\t\t\t\t<BlockList />\n\t\t\t\t\t\t</ObserveTyping>\n\t\t\t\t\t</WritingFlow>\n\t\t\t\t</div>\n\t\t\t</CardBody>\n\t\t\t<CardFooter>\n\t\t\t\t<CheckboxControl\n\t\t\t\t\tlabel={ __(\n\t\t\t\t\t\t'Automatically add new top-level pages to this menu'\n\t\t\t\t\t) }\n\t\t\t\t\thelp={ __(\n\t\t\t\t\t\t'New menu items will automatically appear in this menu as new top level pages are added to your site'\n\t\t\t\t\t) }\n\t\t\t\t\tonChange={ async () => {\n\t\t\t\t\t\tsetAutoAddPages( ! autoAddPages );\n\t\t\t\t\t\tsaveMenu( {\n\t\t\t\t\t\t\t...menu,\n\t\t\t\t\t\t\tauto_add: ! autoAddPages,\n\t\t\t\t\t\t} );\n\t\t\t\t\t} }\n\t\t\t\t\tchecked={ autoAddPages }\n\t\t\t\t/>\n\t\t\t\t<DeleteMenuButton menuId={ menuId } onDelete={ onDeleteMenu } />\n\t\t\t</CardFooter>\n\t\t</Card>\n\t);\n}\n"]}