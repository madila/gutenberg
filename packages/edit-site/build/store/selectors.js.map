{"version":3,"sources":["@wordpress/edit-site/src/store/selectors.js"],"names":["isFeatureActive","state","feature","preferences","features","__experimentalGetPreviewDeviceType","deviceType","getCanUserCreateMedia","select","canUser","getSettings","setIsInserterOpen","settings","focusMode","hasFixedToolbar","__experimentalSetIsInserterOpened","canUserCreateMedia","mediaUpload","onError","rest","wpAllowedMimeTypes","allowedMimeTypes","message","getHomeTemplateId","homeTemplateId","getTemplateId","templateId","getTemplatePartId","templatePartId","getTemplateType","templateType","getPage","page","getShowOnFront","showOnFront"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAGA;;AACA;;AAKA;;AACA;;;;;;AAEA;;;;;;;;AAQO,SAASA,eAAT,CAA0BC,KAA1B,EAAiCC,OAAjC,EAA2C;AACjD,SAAO,iBAAKD,KAAK,CAACE,WAAN,CAAkBC,QAAvB,EAAiC,CAAEF,OAAF,CAAjC,EAA8C,KAA9C,CAAP;AACA;AAED;;;;;;;;;AAOO,SAASG,kCAAT,CAA6CJ,KAA7C,EAAqD;AAC3D,SAAOA,KAAK,CAACK,UAAb;AACA;AAED;;;;;;;;;AAOO,IAAMC,qBAAqB,GAAG,kCAAwB,UAAEC,MAAF;AAAA,SAAc;AAAA,WAC1EA,MAAM,CAAE,MAAF,CAAN,CAAiBC,OAAjB,CAA0B,QAA1B,EAAoC,OAApC,CAD0E;AAAA,GAAd;AAAA,CAAxB,CAA9B;AAIP;;;;;;;;;;AAQO,IAAMC,WAAW,GAAG,qBAC1B,UAAET,KAAF,EAASU,iBAAT,EAAgC;AAC/B,MAAMC,QAAQ,qBACVX,KAAK,CAACW,QADI;AAEbC,IAAAA,SAAS,EAAEb,eAAe,CAAEC,KAAF,EAAS,WAAT,CAFb;AAGba,IAAAA,eAAe,EAAEd,eAAe,CAAEC,KAAF,EAAS,cAAT,CAHnB;AAIbc,IAAAA,iCAAiC,EAAEJ;AAJtB,IAAd;;AAOA,MAAMK,kBAAkB,GAAGT,qBAAqB,CAAEN,KAAF,CAAhD;;AACA,MAAK,CAAEe,kBAAP,EAA4B;AAC3B,WAAOJ,QAAP;AACA;;AAEDA,EAAAA,QAAQ,CAACK,WAAT,GAAuB,gBAA4B;AAAA,QAAxBC,QAAwB,QAAxBA,OAAwB;AAAA,QAAZC,IAAY;AAClD;AACCC,MAAAA,kBAAkB,EAAEnB,KAAK,CAACW,QAAN,CAAeS,gBADpC;AAECH,MAAAA,OAAO,EAAE;AAAA,YAAII,OAAJ,SAAIA,OAAJ;AAAA,eAAmBJ,QAAO,CAAEI,OAAF,CAA1B;AAAA;AAFV,OAGIH,IAHJ;AAKA,GAND;;AAOA,SAAOP,QAAP;AACA,CAtByB,EAuB1B,UAAEX,KAAF;AAAA,SAAa,CACZM,qBAAqB,CAAEN,KAAF,CADT,EAEZA,KAAK,CAACW,QAFM,EAGZZ,eAAe,CAAEC,KAAF,EAAS,WAAT,CAHH,EAIZD,eAAe,CAAEC,KAAF,EAAS,cAAT,CAJH,CAAb;AAAA,CAvB0B,CAApB;AA+BP;;;;;;;;;;AAOO,SAASsB,iBAAT,CAA4BtB,KAA5B,EAAoC;AAC1C,SAAOA,KAAK,CAACuB,cAAb;AACA;AAED;;;;;;;;;AAOO,SAASC,aAAT,CAAwBxB,KAAxB,EAAgC;AACtC,SAAOA,KAAK,CAACyB,UAAb;AACA;AAED;;;;;;;;;AAOO,SAASC,iBAAT,CAA4B1B,KAA5B,EAAoC;AAC1C,SAAOA,KAAK,CAAC2B,cAAb;AACA;AAED;;;;;;;;;AAOO,SAASC,eAAT,CAA0B5B,KAA1B,EAAkC;AACxC,SAAOA,KAAK,CAAC6B,YAAb;AACA;AAED;;;;;;;;;AAOO,SAASC,OAAT,CAAkB9B,KAAlB,EAA0B;AAChC,SAAOA,KAAK,CAAC+B,IAAb;AACA;AAED;;;;;;;;;AAOO,SAASC,cAAT,CAAyBhC,KAAzB,EAAiC;AACvC,SAAOA,KAAK,CAACiC,WAAb;AACA","sourcesContent":["/**\n * External dependencies\n */\nimport { get } from 'lodash';\nimport createSelector from 'rememo';\n\n/**\n * WordPress dependencies\n */\nimport { createRegistrySelector } from '@wordpress/data';\nimport { uploadMedia } from '@wordpress/media-utils';\n\n/**\n * Returns whether the given feature is enabled or not.\n *\n * @param {Object} state   Global application state.\n * @param {string} feature Feature slug.\n *\n * @return {boolean} Is active.\n */\nexport function isFeatureActive( state, feature ) {\n\treturn get( state.preferences.features, [ feature ], false );\n}\n\n/**\n * Returns the current editing canvas device type.\n *\n * @param {Object} state Global application state.\n *\n * @return {string} Device type.\n */\nexport function __experimentalGetPreviewDeviceType( state ) {\n\treturn state.deviceType;\n}\n\n/**\n * Returns whether the current user can create media or not.\n *\n * @param {Object} state Global application state.\n *\n * @return {Object} Whether the current user can create media or not.\n */\nexport const getCanUserCreateMedia = createRegistrySelector( ( select ) => () =>\n\tselect( 'core' ).canUser( 'create', 'media' )\n);\n\n/**\n * Returns the settings, taking into account active features and permissions.\n *\n * @param {Object}   state             Global application state.\n * @param {Function} setIsInserterOpen Setter for the open state of the global inserter.\n *\n * @return {Object} Settings.\n */\nexport const getSettings = createSelector(\n\t( state, setIsInserterOpen ) => {\n\t\tconst settings = {\n\t\t\t...state.settings,\n\t\t\tfocusMode: isFeatureActive( state, 'focusMode' ),\n\t\t\thasFixedToolbar: isFeatureActive( state, 'fixedToolbar' ),\n\t\t\t__experimentalSetIsInserterOpened: setIsInserterOpen,\n\t\t};\n\n\t\tconst canUserCreateMedia = getCanUserCreateMedia( state );\n\t\tif ( ! canUserCreateMedia ) {\n\t\t\treturn settings;\n\t\t}\n\n\t\tsettings.mediaUpload = ( { onError, ...rest } ) => {\n\t\t\tuploadMedia( {\n\t\t\t\twpAllowedMimeTypes: state.settings.allowedMimeTypes,\n\t\t\t\tonError: ( { message } ) => onError( message ),\n\t\t\t\t...rest,\n\t\t\t} );\n\t\t};\n\t\treturn settings;\n\t},\n\t( state ) => [\n\t\tgetCanUserCreateMedia( state ),\n\t\tstate.settings,\n\t\tisFeatureActive( state, 'focusMode' ),\n\t\tisFeatureActive( state, 'fixedToolbar' ),\n\t]\n);\n\n/**\n * Returns the current home template ID.\n *\n * @param {Object} state Global application state.\n *\n * @return {number} Home template ID.\n */\nexport function getHomeTemplateId( state ) {\n\treturn state.homeTemplateId;\n}\n\n/**\n * Returns the current template ID.\n *\n * @param {Object} state Global application state.\n *\n * @return {number} Template ID.\n */\nexport function getTemplateId( state ) {\n\treturn state.templateId;\n}\n\n/**\n * Returns the current template part ID.\n *\n * @param {Object} state Global application state.\n *\n * @return {number} Template part ID.\n */\nexport function getTemplatePartId( state ) {\n\treturn state.templatePartId;\n}\n\n/**\n * Returns the current template type.\n *\n * @param {Object} state Global application state.\n *\n * @return {string} Template type.\n */\nexport function getTemplateType( state ) {\n\treturn state.templateType;\n}\n\n/**\n * Returns the current page object.\n *\n * @param {Object} state Global application state.\n *\n * @return {Object} Page.\n */\nexport function getPage( state ) {\n\treturn state.page;\n}\n\n/**\n * Returns the site's current `show_on_front` setting.\n *\n * @param {Object} state Global application state.\n *\n * @return {Object} The setting.\n */\nexport function getShowOnFront( state ) {\n\treturn state.showOnFront;\n}\n"]}