{"version":3,"sources":["@wordpress/edit-widgets/src/components/sidebar/index.js"],"names":["SIDEBAR_ACTIVE_BY_DEFAULT","Platform","select","web","native","CORE_WIDGET_COMPLEMENTARY_AREAS","ComplementaryAreaHeader","activeComplementaryArea","enableComplementaryArea","label","identifier","isActive","Sidebar","activeArea","getActiveComplementaryArea","isSidebarOpen","getBlockSelectionStart","getBlockRootClientId","selectionStart","currentArea","hasSelectedNonAreaBlock","isGeneralSidebarOpen","cog"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { map } from 'lodash';\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { useEffect, Platform } from '@wordpress/element';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { ComplementaryArea } from '@wordpress/interface';\nimport { BlockInspector } from '@wordpress/block-editor';\nimport { cog } from '@wordpress/icons';\nimport { Button } from '@wordpress/components';\nimport { useSelect, useDispatch } from '@wordpress/data';\n\nconst SIDEBAR_ACTIVE_BY_DEFAULT = Platform.select( {\n\tweb: true,\n\tnative: false,\n} );\n\n/**\n * Internal dependencies\n */\nimport BlockAreas from './block-areas';\n\nconst CORE_WIDGET_COMPLEMENTARY_AREAS = {\n\t'edit-widgets/block-areas': __( 'Block areas' ),\n\t'edit-widgets/block-inspector': __( 'Block' ),\n};\n\nfunction ComplementaryAreaHeader( { activeComplementaryArea } ) {\n\tconst { enableComplementaryArea } = useDispatch( 'core/interface' );\n\treturn (\n\t\t<ul>\n\t\t\t{ map( CORE_WIDGET_COMPLEMENTARY_AREAS, ( label, identifier ) => {\n\t\t\t\tconst isActive = identifier === activeComplementaryArea;\n\t\t\t\treturn (\n\t\t\t\t\t<li key={ identifier }>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tonClick={ () =>\n\t\t\t\t\t\t\t\tenableComplementaryArea(\n\t\t\t\t\t\t\t\t\t'core/edit-widgets',\n\t\t\t\t\t\t\t\t\tidentifier\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tclassName={ classnames(\n\t\t\t\t\t\t\t\t'edit-widgets-sidebar__panel-tab',\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t'is-active': isActive,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\taria-label={\n\t\t\t\t\t\t\t\tisActive\n\t\t\t\t\t\t\t\t\t? // translators: %s: sidebar label e.g: \"Block areas\".\n\t\t\t\t\t\t\t\t\t  sprintf( __( '%s (selected)' ), label )\n\t\t\t\t\t\t\t\t\t: label\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdata-label={ label }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ label }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</li>\n\t\t\t\t);\n\t\t\t} ) }\n\t\t</ul>\n\t);\n}\n\nexport default function Sidebar() {\n\tconst { enableComplementaryArea } = useDispatch( 'core/interface' );\n\tconst {\n\t\tcurrentArea,\n\t\thasSelectedNonAreaBlock,\n\t\tisGeneralSidebarOpen,\n\t} = useSelect( ( select ) => {\n\t\tlet activeArea = select( 'core/interface' ).getActiveComplementaryArea(\n\t\t\t'core/edit-widgets'\n\t\t);\n\t\tconst isSidebarOpen = !! activeArea;\n\t\tconst { getBlockSelectionStart, getBlockRootClientId } = select(\n\t\t\t'core/block-editor'\n\t\t);\n\t\tconst selectionStart = getBlockSelectionStart();\n\t\tif ( ! CORE_WIDGET_COMPLEMENTARY_AREAS[ activeArea ] ) {\n\t\t\tif ( ! selectionStart ) {\n\t\t\t\tactiveArea = 'edit-widgets/block-areas';\n\t\t\t} else {\n\t\t\t\tactiveArea = 'edit-widgets/block-inspector';\n\t\t\t}\n\t\t}\n\t\treturn {\n\t\t\tcurrentArea: activeArea,\n\t\t\thasSelectedNonAreaBlock: !! (\n\t\t\t\tselectionStart && getBlockRootClientId( selectionStart )\n\t\t\t),\n\t\t\tisGeneralSidebarOpen: isSidebarOpen,\n\t\t};\n\t}, [] );\n\n\t// currentArea, and isGeneralSidebarOpen are intentionally left out from the dependencies,\n\t// because we want to run the effect when a block is selected/unselected and not when the sidebar state changes.\n\tuseEffect( () => {\n\t\tif (\n\t\t\thasSelectedNonAreaBlock &&\n\t\t\tcurrentArea === 'edit-widgets/block-areas' &&\n\t\t\tisGeneralSidebarOpen\n\t\t) {\n\t\t\tenableComplementaryArea(\n\t\t\t\t'core/edit-widgets',\n\t\t\t\t'edit-widgets/block-inspector'\n\t\t\t);\n\t\t}\n\t\tif (\n\t\t\t! hasSelectedNonAreaBlock &&\n\t\t\tcurrentArea === 'edit-widgets/block-inspector' &&\n\t\t\tisGeneralSidebarOpen\n\t\t) {\n\t\t\tenableComplementaryArea(\n\t\t\t\t'core/edit-widgets',\n\t\t\t\t'edit-widgets/block-areas'\n\t\t\t);\n\t\t}\n\t}, [ hasSelectedNonAreaBlock, enableComplementaryArea ] );\n\n\treturn (\n\t\t<ComplementaryArea\n\t\t\tclassName=\"edit-widgets-sidebar\"\n\t\t\theader={\n\t\t\t\t<ComplementaryAreaHeader\n\t\t\t\t\tactiveComplementaryArea={ currentArea }\n\t\t\t\t/>\n\t\t\t}\n\t\t\theaderClassName=\"edit-widgets-sidebar__panel-tabs\"\n\t\t\tscope=\"core/edit-widgets\"\n\t\t\tidentifier={ currentArea }\n\t\t\ticon={ cog }\n\t\t\tisActiveByDefault={ SIDEBAR_ACTIVE_BY_DEFAULT }\n\t\t>\n\t\t\t{ currentArea === 'edit-widgets/block-areas' && <BlockAreas /> }\n\t\t\t{ currentArea === 'edit-widgets/block-inspector' && (\n\t\t\t\t<BlockInspector />\n\t\t\t) }\n\t\t</ComplementaryArea>\n\t);\n}\n"]}