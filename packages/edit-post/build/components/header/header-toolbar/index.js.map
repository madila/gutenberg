{"version":3,"sources":["@wordpress/edit-post/src/components/header/header-toolbar/index.js"],"names":["HeaderToolbar","setIsInserterOpened","select","hasInserterItems","getBlockRootClientId","getBlockSelectionEnd","hasFixedToolbar","isFeatureActive","isInserterEnabled","getEditorMode","getEditorSettings","richEditingEnabled","isInserterOpened","isTextModeEnabled","previewDeviceType","__experimentalGetPreviewDeviceType","isLargeViewport","displayBlockToolbar","toolbarAriaLabel","Button","plus","ToolSelector","EditorHistoryUndo","EditorHistoryRedo","TableOfContents","BlockNavigationDropdown"],"mappings":";;;;;;;;;AAGA;;AACA;;AACA;;AACA;;AAMA;;AAKA;;AAIA;;AArBA;;;AAuBA,SAASA,aAAT,GAAyB;AAAA,qBACQ,uBAAa,gBAAb,CADR;AAAA,MAChBC,mBADgB,gBAChBA,mBADgB;;AAAA,mBAQpB,qBAAW,UAAEC,MAAF,EAAc;AAAA,kBAKxBA,MAAM,CAAE,mBAAF,CALkB;AAAA,QAE3BC,gBAF2B,WAE3BA,gBAF2B;AAAA,QAG3BC,oBAH2B,WAG3BA,oBAH2B;AAAA,QAI3BC,oBAJ2B,WAI3BA,oBAJ2B;;AAM5B,WAAO;AACNC,MAAAA,eAAe,EAAEJ,MAAM,CAAE,gBAAF,CAAN,CAA2BK,eAA3B,CAChB,cADgB,CADX;AAIN;AACAC,MAAAA,iBAAiB,EAChBN,MAAM,CAAE,gBAAF,CAAN,CAA2BO,aAA3B,OAA+C,QAA/C,IACAP,MAAM,CAAE,aAAF,CAAN,CAAwBQ,iBAAxB,GACEC,kBAFF,IAGAR,gBAAgB,CACfC,oBAAoB,CAAEC,oBAAoB,EAAtB,CADL,CATX;AAYNO,MAAAA,gBAAgB,EAAEV,MAAM,CAAE,gBAAF,CAAN,CAA2BU,gBAA3B,EAZZ;AAaNC,MAAAA,iBAAiB,EAChBX,MAAM,CAAE,gBAAF,CAAN,CAA2BO,aAA3B,OAA+C,MAd1C;AAeNK,MAAAA,iBAAiB,EAAEZ,MAAM,CACxB,gBADwB,CAAN,CAEjBa,kCAFiB;AAfb,KAAP;AAmBA,GAzBG,EAyBD,EAzBC,CARoB;AAAA,MAGvBT,eAHuB,cAGvBA,eAHuB;AAAA,MAIvBE,iBAJuB,cAIvBA,iBAJuB;AAAA,MAKvBI,gBALuB,cAKvBA,gBALuB;AAAA,MAMvBC,iBANuB,cAMvBA,iBANuB;AAAA,MAOvBC,iBAPuB,cAOvBA,iBAPuB;;AAkCxB,MAAME,eAAe,GAAG,+BAAkB,QAAlB,CAAxB;AAEA,MAAMC,mBAAmB,GACxB,CAAED,eAAF,IAAqBF,iBAAiB,KAAK,SAA3C,IAAwDR,eADzD;AAGA,MAAMY,gBAAgB,GAAGD,mBAAmB;AACzC;AACA,gBAAI,0BAAJ,CAFyC;AAGzC;AACA,gBAAI,gBAAJ,CAJH;AAMA,SACC,4BAAC,6BAAD;AACC,IAAA,SAAS,EAAC,0BADX;AAEC,kBAAaC;AAFd,KAIC,4BAAC,qCAAD;AACC,IAAA,EAAE,EAAGC,kBADN;AAEC,IAAA,SAAS,EAAC,2CAFX;AAGC,IAAA,SAAS,MAHV;AAIC,IAAA,SAAS,EAAGP,gBAJb;AAKC,IAAA,OAAO,EAAG;AAAA,aAAMX,mBAAmB,CAAE,CAAEW,gBAAJ,CAAzB;AAAA,KALX;AAMC,IAAA,QAAQ,EAAG,CAAEJ,iBANd;AAOC,IAAA,IAAI,EAAGY,WAPR;AAQC,IAAA,KAAK,EAAG,cACP,WADO,EAEP,yCAFO;AART,IAJD,EAiBGJ,eAAe,IAAI,4BAAC,qCAAD;AAAa,IAAA,EAAE,EAAGK;AAAlB,IAjBtB,EAkBC,4BAAC,qCAAD;AAAa,IAAA,EAAE,EAAGC;AAAlB,IAlBD,EAmBC,4BAAC,qCAAD;AAAa,IAAA,EAAE,EAAGC;AAAlB,IAnBD,EAoBC,4BAAC,qCAAD;AACC,IAAA,EAAE,EAAGC,uBADN;AAEC,IAAA,uBAAuB,EAAGX;AAF3B,IApBD,EAwBC,4BAAC,qCAAD;AACC,IAAA,EAAE,EAAGY,oCADN;AAEC,IAAA,UAAU,EAAGZ;AAFd,IAxBD,EA4BGI,mBAAmB,IACpB;AAAK,IAAA,SAAS,EAAC;AAAf,KACC,4BAAC,yBAAD;AAAc,IAAA,cAAc;AAA5B,IADD,CA7BF,CADD;AAoCA;;eAEcjB,a","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useViewportMatch } from '@wordpress/compose';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { __, _x } from '@wordpress/i18n';\nimport {\n\tBlockToolbar,\n\tNavigableToolbar,\n\tBlockNavigationDropdown,\n\tToolSelector,\n} from '@wordpress/block-editor';\nimport {\n\tTableOfContents,\n\tEditorHistoryRedo,\n\tEditorHistoryUndo,\n} from '@wordpress/editor';\nimport {\n\tButton,\n\t__experimentalToolbarItem as ToolbarItem,\n} from '@wordpress/components';\nimport { plus } from '@wordpress/icons';\n\nfunction HeaderToolbar() {\n\tconst { setIsInserterOpened } = useDispatch( 'core/edit-post' );\n\tconst {\n\t\thasFixedToolbar,\n\t\tisInserterEnabled,\n\t\tisInserterOpened,\n\t\tisTextModeEnabled,\n\t\tpreviewDeviceType,\n\t} = useSelect( ( select ) => {\n\t\tconst {\n\t\t\thasInserterItems,\n\t\t\tgetBlockRootClientId,\n\t\t\tgetBlockSelectionEnd,\n\t\t} = select( 'core/block-editor' );\n\t\treturn {\n\t\t\thasFixedToolbar: select( 'core/edit-post' ).isFeatureActive(\n\t\t\t\t'fixedToolbar'\n\t\t\t),\n\t\t\t// This setting (richEditingEnabled) should not live in the block editor's setting.\n\t\t\tisInserterEnabled:\n\t\t\t\tselect( 'core/edit-post' ).getEditorMode() === 'visual' &&\n\t\t\t\tselect( 'core/editor' ).getEditorSettings()\n\t\t\t\t\t.richEditingEnabled &&\n\t\t\t\thasInserterItems(\n\t\t\t\t\tgetBlockRootClientId( getBlockSelectionEnd() )\n\t\t\t\t),\n\t\t\tisInserterOpened: select( 'core/edit-post' ).isInserterOpened(),\n\t\t\tisTextModeEnabled:\n\t\t\t\tselect( 'core/edit-post' ).getEditorMode() === 'text',\n\t\t\tpreviewDeviceType: select(\n\t\t\t\t'core/edit-post'\n\t\t\t).__experimentalGetPreviewDeviceType(),\n\t\t};\n\t}, [] );\n\tconst isLargeViewport = useViewportMatch( 'medium' );\n\n\tconst displayBlockToolbar =\n\t\t! isLargeViewport || previewDeviceType !== 'Desktop' || hasFixedToolbar;\n\n\tconst toolbarAriaLabel = displayBlockToolbar\n\t\t? /* translators: accessibility text for the editor toolbar when Top Toolbar is on */\n\t\t  __( 'Document and block tools' )\n\t\t: /* translators: accessibility text for the editor toolbar when Top Toolbar is off */\n\t\t  __( 'Document tools' );\n\n\treturn (\n\t\t<NavigableToolbar\n\t\t\tclassName=\"edit-post-header-toolbar\"\n\t\t\taria-label={ toolbarAriaLabel }\n\t\t>\n\t\t\t<ToolbarItem\n\t\t\t\tas={ Button }\n\t\t\t\tclassName=\"edit-post-header-toolbar__inserter-toggle\"\n\t\t\t\tisPrimary\n\t\t\t\tisPressed={ isInserterOpened }\n\t\t\t\tonClick={ () => setIsInserterOpened( ! isInserterOpened ) }\n\t\t\t\tdisabled={ ! isInserterEnabled }\n\t\t\t\ticon={ plus }\n\t\t\t\tlabel={ _x(\n\t\t\t\t\t'Add block',\n\t\t\t\t\t'Generic label for block inserter button'\n\t\t\t\t) }\n\t\t\t/>\n\t\t\t{ isLargeViewport && <ToolbarItem as={ ToolSelector } /> }\n\t\t\t<ToolbarItem as={ EditorHistoryUndo } />\n\t\t\t<ToolbarItem as={ EditorHistoryRedo } />\n\t\t\t<ToolbarItem\n\t\t\t\tas={ TableOfContents }\n\t\t\t\thasOutlineItemsDisabled={ isTextModeEnabled }\n\t\t\t/>\n\t\t\t<ToolbarItem\n\t\t\t\tas={ BlockNavigationDropdown }\n\t\t\t\tisDisabled={ isTextModeEnabled }\n\t\t\t/>\n\t\t\t{ displayBlockToolbar && (\n\t\t\t\t<div className=\"edit-post-header-toolbar__block-toolbar\">\n\t\t\t\t\t<BlockToolbar hideDragHandle />\n\t\t\t\t</div>\n\t\t\t) }\n\t\t</NavigableToolbar>\n\t);\n}\n\nexport default HeaderToolbar;\n"]}