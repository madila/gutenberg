{"version":3,"sources":["@wordpress/block-directory/src/components/downloadable-blocks-panel/index.js"],"names":["DownloadableBlocksPanel","downloadableItems","onSelect","onHover","hasPermission","isLoading","isWaiting","debouncedSpeak","length","resultsFoundMessage","withSpokenMessages","select","filterValue","getDownloadableBlocks","isRequestingDownloadableBlocks","canUser"],"mappings":";;;;;;;;;AAGA;;AACA;;AACA;;AACA;;AACA;;AAKA;;AAZA;;;;AASA;;;AAKA,SAASA,uBAAT,OAQI;AAAA,MAPHC,iBAOG,QAPHA,iBAOG;AAAA,MANHC,QAMG,QANHA,QAMG;AAAA,MALHC,OAKG,QALHA,OAKG;AAAA,MAJHC,aAIG,QAJHA,aAIG;AAAA,MAHHC,SAGG,QAHHA,SAGG;AAAA,MAFHC,SAEG,QAFHA,SAEG;AAAA,MADHC,cACG,QADHA,cACG;;AACH,MAAK,UAAUH,aAAf,EAA+B;AAC9BG,IAAAA,cAAc,CAAE,cAAI,kCAAJ,CAAF,CAAd;AACA,WACC;AAAG,MAAA,SAAS,EAAC;AAAb,OACG,cAAI,kCAAJ,CADH,CADD;AAKA;;AAED,MAAK,OAAOH,aAAP,KAAyB,WAAzB,IAAwCC,SAAxC,IAAqDC,SAA1D,EAAsE;AACrE,WACC;AAAG,MAAA,SAAS,EAAC;AAAb,OACC,4BAAC,mBAAD,OADD,CADD;AAKA;;AAED,MAAK,CAAEL,iBAAiB,CAACO,MAAzB,EAAkC;AACjC,WACC;AAAG,MAAA,SAAS,EAAC;AAAb,OACG,cAAI,kCAAJ,CADH,CADD;AAKA;;AAED,MAAMC,mBAAmB,GAAG;AAC3B;AACA,gBACC,+EADD,EAEC,gFAFD,EAGCR,iBAAiB,CAACO,MAHnB,CAF2B,EAO3BP,iBAAiB,CAACO,MAPS,CAA5B;AAUAD,EAAAA,cAAc,CAAEE,mBAAF,CAAd;AACA,SACC,4BAAC,iBAAD,QACC;AAAG,IAAA,SAAS,EAAC;AAAb,KACG,cACD,gFADC,CADH,CADD,EAMC,4BAAC,+BAAD;AACC,IAAA,KAAK,EAAGR,iBADT;AAEC,IAAA,QAAQ,EAAGC,QAFZ;AAGC,IAAA,OAAO,EAAGC;AAHX,IAND,CADD;AAcA;;eAEc,sBAAS,CACvBO,8BADuB,EAEvB,sBAAY,UAAEC,MAAF,SAA+B;AAAA,MAAnBC,WAAmB,SAAnBA,WAAmB;;AAAA,gBAItCD,MAAM,CAAE,sBAAF,CAJgC;AAAA,MAEzCE,qBAFyC,WAEzCA,qBAFyC;AAAA,MAGzCC,8BAHyC,WAGzCA,8BAHyC;;AAM1C,MAAMV,aAAa,GAAGO,MAAM,CAAE,MAAF,CAAN,CAAiBI,OAAjB,CACrB,MADqB,EAErB,wBAFqB,CAAtB;AAIA,MAAMd,iBAAiB,GAAGG,aAAa,GACpCS,qBAAqB,CAAED,WAAF,CADe,GAEpC,EAFH;AAGA,MAAMP,SAAS,GAAGS,8BAA8B,CAAEF,WAAF,CAAhD;AAEA,SAAO;AACNX,IAAAA,iBAAiB,EAAjBA,iBADM;AAENG,IAAAA,aAAa,EAAbA,aAFM;AAGNC,IAAAA,SAAS,EAATA;AAHM,GAAP;AAKA,CApBD,CAFuB,CAAT,EAuBVL,uBAvBU,C","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { Fragment } from '@wordpress/element';\nimport { compose } from '@wordpress/compose';\nimport { withSelect } from '@wordpress/data';\nimport { __, _n, sprintf } from '@wordpress/i18n';\nimport { Spinner, withSpokenMessages } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport DownloadableBlocksList from '../downloadable-blocks-list';\n\nfunction DownloadableBlocksPanel( {\n\tdownloadableItems,\n\tonSelect,\n\tonHover,\n\thasPermission,\n\tisLoading,\n\tisWaiting,\n\tdebouncedSpeak,\n} ) {\n\tif ( false === hasPermission ) {\n\t\tdebouncedSpeak( __( 'No blocks found in your library.' ) );\n\t\treturn (\n\t\t\t<p className=\"block-directory-downloadable-blocks-panel__description has-no-results\">\n\t\t\t\t{ __( 'No blocks found in your library.' ) }\n\t\t\t</p>\n\t\t);\n\t}\n\n\tif ( typeof hasPermission === 'undefined' || isLoading || isWaiting ) {\n\t\treturn (\n\t\t\t<p className=\"block-directory-downloadable-blocks-panel__description has-no-results\">\n\t\t\t\t<Spinner />\n\t\t\t</p>\n\t\t);\n\t}\n\n\tif ( ! downloadableItems.length ) {\n\t\treturn (\n\t\t\t<p className=\"block-directory-downloadable-blocks-panel__description has-no-results\">\n\t\t\t\t{ __( 'No blocks found in your library.' ) }\n\t\t\t</p>\n\t\t);\n\t}\n\n\tconst resultsFoundMessage = sprintf(\n\t\t/* translators: %s: number of available blocks. */\n\t\t_n(\n\t\t\t'No blocks found in your library. We did find %d block available for download.',\n\t\t\t'No blocks found in your library. We did find %d blocks available for download.',\n\t\t\tdownloadableItems.length\n\t\t),\n\t\tdownloadableItems.length\n\t);\n\n\tdebouncedSpeak( resultsFoundMessage );\n\treturn (\n\t\t<Fragment>\n\t\t\t<p className=\"block-directory-downloadable-blocks-panel__description\">\n\t\t\t\t{ __(\n\t\t\t\t\t'No blocks found in your library. These blocks can be downloaded and installed:'\n\t\t\t\t) }\n\t\t\t</p>\n\t\t\t<DownloadableBlocksList\n\t\t\t\titems={ downloadableItems }\n\t\t\t\tonSelect={ onSelect }\n\t\t\t\tonHover={ onHover }\n\t\t\t/>\n\t\t</Fragment>\n\t);\n}\n\nexport default compose( [\n\twithSpokenMessages,\n\twithSelect( ( select, { filterValue } ) => {\n\t\tconst {\n\t\t\tgetDownloadableBlocks,\n\t\t\tisRequestingDownloadableBlocks,\n\t\t} = select( 'core/block-directory' );\n\n\t\tconst hasPermission = select( 'core' ).canUser(\n\t\t\t'read',\n\t\t\t'block-directory/search'\n\t\t);\n\t\tconst downloadableItems = hasPermission\n\t\t\t? getDownloadableBlocks( filterValue )\n\t\t\t: [];\n\t\tconst isLoading = isRequestingDownloadableBlocks( filterValue );\n\n\t\treturn {\n\t\t\tdownloadableItems,\n\t\t\thasPermission,\n\t\t\tisLoading,\n\t\t};\n\t} ),\n] )( DownloadableBlocksPanel );\n"]}