{"version":3,"sources":["@wordpress/block-library/src/template-part/edit/placeholder/index.js"],"names":["TemplatePartPlaceholder","setAttributes","saveEntityRecord","onCreate","title","slug","status","meta","theme","templatePart","postId","id","filterValue","setFilterValue","blockDefault","isOpen","onToggle"],"mappings":";;;;;;;;;AAIA;;;;;;;;AADA;;AAEA;;AACA;;AACA;;AAMA;;AACA;;AAKA;;AAnBA;;;;AAgBA;;;AAKe,SAASA,uBAAT,OAAsD;AAAA,MAAlBC,aAAkB,QAAlBA,aAAkB;;AAAA,qBACvC,uBAAa,MAAb,CADuC;AAAA,MAC5DC,gBAD4D,gBAC5DA,gBAD4D;;AAEpE,MAAMC,QAAQ,GAAG,gHAAa;AAAA;AAAA;AAAA;AAAA;AAAA;AACvBC,YAAAA,KADuB,GACf,wBADe;AAEvBC,YAAAA,IAFuB,GAEhB,uBAAcD,KAAd,CAFgB;AAAA;AAAA,mBAGFF,gBAAgB,CAC1C,UAD0C,EAE1C,kBAF0C,EAG1C;AACCE,cAAAA,KAAK,EAALA,KADD;AAECE,cAAAA,MAAM,EAAE,SAFT;AAGCD,cAAAA,IAAI,EAAJA,IAHD;AAICE,cAAAA,IAAI,EAAE;AAAEC,gBAAAA,KAAK,EAAE;AAAT;AAJP,aAH0C,CAHd;;AAAA;AAGvBC,YAAAA,YAHuB;AAa7BR,YAAAA,aAAa,CAAE;AACdS,cAAAA,MAAM,EAAED,YAAY,CAACE,EADP;AAEdN,cAAAA,IAAI,EAAEI,YAAY,CAACJ,IAFL;AAGdG,cAAAA,KAAK,EAAEC,YAAY,CAACF,IAAb,CAAkBC;AAHX,aAAF,CAAb;;AAb6B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAb,IAkBd,CAAEP,aAAF,CAlBc,CAAjB;;AAFoE,kBAsB5B,uBAAU,EAAV,CAtB4B;AAAA;AAAA,MAsB5DW,WAtB4D;AAAA,MAsB/CC,cAtB+C;;AAuBpE,SACC,4BAAC,uBAAD;AACC,IAAA,IAAI,EAAGC,mBADR;AAEC,IAAA,KAAK,EAAG,cAAI,eAAJ,CAFT;AAGC,IAAA,YAAY,EAAG,cACd,mEADc;AAHhB,KAOC,4BAAC,oBAAD;AACC,IAAA,gBAAgB,EAAC,8DADlB;AAEC,IAAA,QAAQ,EAAC,mBAFV;AAGC,IAAA,YAAY,EAAG;AAAA,UAAIC,MAAJ,SAAIA,MAAJ;AAAA,UAAYC,QAAZ,SAAYA,QAAZ;AAAA,aACd,4BAAC,uBAAD,QACC,4BAAC,kBAAD;AACC,QAAA,SAAS,MADV;AAEC,QAAA,OAAO,EAAGA,QAFX;AAGC,yBAAgBD;AAHjB,SAKG,cAAI,iBAAJ,CALH,CADD,EAQC,4BAAC,kBAAD;AAAQ,QAAA,OAAO,EAAGZ;AAAlB,SACG,cAAI,mBAAJ,CADH,CARD,CADc;AAAA,KAHhB;AAiBC,IAAA,aAAa,EAAG;AAAA,aACf,qDACC,4BAAC,qCAAD;AACC,QAAA,QAAQ,EAAGU,cADZ;AAEC,QAAA,SAAS,EAAC;AAFX,QADD,EAKC;AAAK,QAAA,SAAS,EAAC;AAAf,SACC,4BAAC,6BAAD;AACC,QAAA,aAAa,EAAGZ,aADjB;AAEC,QAAA,WAAW,EAAGW;AAFf,QADD,CALD,CADe;AAAA;AAjBjB,IAPD,CADD;AA0CA","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { useState, useCallback } from '@wordpress/element';\nimport { useDispatch } from '@wordpress/data';\nimport { cleanForSlug } from '@wordpress/url';\nimport {\n\tPlaceholder,\n\tDropdown,\n\tButtonGroup,\n\tButton,\n} from '@wordpress/components';\nimport { blockDefault } from '@wordpress/icons';\nimport { __experimentalSearchForm as SearchForm } from '@wordpress/block-editor';\n\n/**\n * Internal dependencies\n */\nimport TemplatePartPreviews from './template-part-previews';\n\nexport default function TemplatePartPlaceholder( { setAttributes } ) {\n\tconst { saveEntityRecord } = useDispatch( 'core' );\n\tconst onCreate = useCallback( async () => {\n\t\tconst title = 'Untitled Template Part';\n\t\tconst slug = cleanForSlug( title );\n\t\tconst templatePart = await saveEntityRecord(\n\t\t\t'postType',\n\t\t\t'wp_template_part',\n\t\t\t{\n\t\t\t\ttitle,\n\t\t\t\tstatus: 'publish',\n\t\t\t\tslug,\n\t\t\t\tmeta: { theme: 'custom' },\n\t\t\t}\n\t\t);\n\t\tsetAttributes( {\n\t\t\tpostId: templatePart.id,\n\t\t\tslug: templatePart.slug,\n\t\t\ttheme: templatePart.meta.theme,\n\t\t} );\n\t}, [ setAttributes ] );\n\n\tconst [ filterValue, setFilterValue ] = useState( '' );\n\treturn (\n\t\t<Placeholder\n\t\t\ticon={ blockDefault }\n\t\t\tlabel={ __( 'Template Part' ) }\n\t\t\tinstructions={ __(\n\t\t\t\t'Create a new template part or pick an existing one from the list.'\n\t\t\t) }\n\t\t>\n\t\t\t<Dropdown\n\t\t\t\tcontentClassName=\"wp-block-template-part__placeholder-preview-dropdown-content\"\n\t\t\t\tposition=\"bottom right left\"\n\t\t\t\trenderToggle={ ( { isOpen, onToggle } ) => (\n\t\t\t\t\t<ButtonGroup>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tisPrimary\n\t\t\t\t\t\t\tonClick={ onToggle }\n\t\t\t\t\t\t\taria-expanded={ isOpen }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Choose existing' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button onClick={ onCreate }>\n\t\t\t\t\t\t\t{ __( 'New template part' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</ButtonGroup>\n\t\t\t\t) }\n\t\t\t\trenderContent={ () => (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<SearchForm\n\t\t\t\t\t\t\tonChange={ setFilterValue }\n\t\t\t\t\t\t\tclassName=\"wp-block-template-part__placeholder-preview-search-form\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div className=\"wp-block-template-part__placeholder-preview-container\">\n\t\t\t\t\t\t\t<TemplatePartPreviews\n\t\t\t\t\t\t\t\tsetAttributes={ setAttributes }\n\t\t\t\t\t\t\t\tfilterValue={ filterValue }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>\n\t\t\t\t) }\n\t\t\t/>\n\t\t</Placeholder>\n\t);\n}\n"]}